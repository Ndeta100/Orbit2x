# nixpacks.toml - Railway build configuration
[phases.setup]
nixPkgs = ["go", "nodejs-18_x"]

[phases.install]
cmds = [
    "npm ci",
    "go install github.coq  Am/a-h/templ/cmd/templ@latest"
]

[phases.build]
cmds = [
    "find . -name '*_templ.go' -delete",
    "templ generate",
    "go mod tidy",
    "npm run build",
    "go build -o orbit2x ."
]

[start]
cmd = "./orbit2x"